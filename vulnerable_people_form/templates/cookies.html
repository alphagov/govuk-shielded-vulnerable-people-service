{%- from "govuk_frontend_jinja/components/table/macro.html" import govukTable -%}
{%- from "govuk_frontend_jinja/components/radios/macro.html" import govukRadios -%}
{%- from 'govuk_frontend_jinja/components/button/macro.html' import govukButton -%}

{% extends "base-with-home-breadcrumb.html" %}

{% block centered_content %}
  <style>
    .cookie-settings__form-wrapper{
      display: None;
    }

    .js-enabled .cookie-settings__form-wrapper {
      display: block;
      padding-top: 30px;
    }

    .js-enabled .cookie-settings__no-js {
      display: none;
    }

    .cookie-settings__list {
      list-style-type: initial;
      margin: 4px;
      padding-left: 6px;
    }

    .cookie-settings__confirmation {
      display: none;
      border: 3px solid #00703c;
    }
    .cookie-settings__confirmation h2 {
      color: #00703c;
    }

    .cookies-content {
      @include govuk-font(19);
    }

    .cookie-settings__table-wrapper {
      padding-top: 30px;
    }
  </style>
  <div class="cookie-settings__confirmation govuk-!-padding-4 govuk-!-margin-bottom-8" data-cookie-confirmation="true">
      <section aria-label="Notice" aria-live="polite" role="region">
          <h2 class="govuk-heading-m">Your cookie settings were saved.</h2>
          <a class="govuk-link cookie-settings__prev-page" href={{previous_path}}>
            Go back to the page you were looking at
          </a>
      </section>
  </div>
  <h1 class="govuk-heading-xl govuk-!-margin-top-0 govuk-!-margin-bottom-8">
    {{ title_text }}
  </h1>
  <p class="govuk-body">This service puts small files (known as ‘cookies’) onto your computer.</p>
  <p class="govuk-body">Cookies are used to:</p>
  <ul class="govuk-list govuk-list--bullet">
    <li>remember which question you’re up to and how you’ve answered previous questions</li>
    <li>measure how you use the website so it can be updated and improved based on your needs</li>
  </ul>
  <a class="govuk-link" href="https://ico.org.uk/your-data-matters/online/cookies/">Find out how to manage cookies</a>
  

  <div class="cookie-settings__no-js">
    <p>We use Javascript to set most of our cookies. Unfortunately Javascript is not running on your browser, so you cannot change your settings. You can try:</p>
    <ul>
      <li>reloading the page</li>
      <li>turning on Javascript in your browser</li>
    </ul>
  </div>
  <h2 class="govuk-heading-m govuk-!-margin-bottom-3 govuk-!-margin-top-8">Essential cookies</h2>
  <p class="govuk-body">These cookies are required for this service to operate. We do not need to ask permission to use them.</p>
    {{ govukTable({
      "firstCellIsHeader": true,
      "head": [
        {
          "text": "Name",
          "classes": "govuk-!-width-one-quarter"
        },
        {
          "text": "Purpose",
          "classes": "govuk-!-width-one-half"
        },
        {
          "text": "Expires",
          "classes": "govuk-!-width-one-quarter"
        }
      ],
      "rows": [
        [
          {
            "text": "cookie_preferences_set"
          },
          {
            "text": "Lets us know whether you’ve already set your cookies preferences."
          },
          {
            "text": "1 year"
          }
        ],
        [
          {
            "text": "cookie_preferences"
          },
          {
            "text": "Let us know what your cookie preferences are."
          },
          {
            "text": "1 year"
          }
        ],
        [
          {
            "text": "_session_id"
          },
          {
            "text": "Remembers which question you’re up to and how you answered previous questions."
          },
          {
            "text": "4 hours"
          }
        ]
      ]
      }) 
    }}
  <h2 class="govuk-heading-m govuk-!-margin-bottom-3 govuk-!-margin-top-8">NHS login cookies</h2>
  <p class="govuk-body">If you choose to create an account using NHS login, <a class="govuk-link" href="https://access.login.nhs.uk/cookies">NHS login will set additional cookies on your device</a>.</p>
  <h2 class="govuk-heading-m govuk-!-margin-bottom-3 govuk-!-margin-top-8">Measuring website usage (Google Analytics)</h2>
  <p class="govuk-body">We use Google Analytics software to collect anonymised information about how you use the service. We do this to help make sure the site is meeting the needs of its users and to help us make improvements.</p> <p class="govuk-body">Google Analytics stores information about:</p>
  <ul class="govuk-list govuk-list--bullet">
    <li>the pages you visit</li>
    <li>how long you spend on each page</li>
    <li>how you arrived at the site</li>
    <li>what you click on while you’re visiting the site</li>
    <li>the device and browser you’re using</li>
  </ul>
  <p class="govuk-body">We don’t collect or store your personal information (for example your name or address) so this information can’t be used to identify who you are.</p>
  <p class="govuk-body">We don’t allow Google to use or share our analytics data.</p>
  <p class="govuk-body">Google Analytics sets the following cookies:</p>
    {{ govukTable({
      "firstCellIsHeader": true,
      "classes": "cookie-settings__table-wrapper",
      "head": [
        {
          "text": "Name",
          "classes": "govuk-!-width-one-quarter"
        },
        {
          "text": "Purpose",
          "classes": "govuk-!-width-one-half"
        },
        {
          "text": "Expires",
          "classes": "govuk-!-width-one-quarter"
        }
      ],
      "rows": [
        [
          {
            "text": "_ga"
          },
          {
            "text": "This helps us count how many people visit the service by tracking if you’ve visited before"
          },
          {
            "text": "2 years"
          }
        ],
        [
          {
            "text": "_gid"
          },
          {
            "text": "This helps us count how many people visit the service by tracking if you’ve visited before"
          },
          {
            "text": "3 days"
          }
        ],
      ]
    }) }}

  <div class="cookie-settings__form-wrapper">
    <form data-module="cookie-settings">
    {{ govukRadios({
      "name": "cookies-usage",
      "fieldset": {
        "legend": {
          "text": "Do you want to accept analytics cookies?",
          "classes": "govuk-fieldset__legend--m"
        }
      },
      "items": [
        {
          "value": "on",
          "text": "Yes"
        },
        {
          "value": "off",
          "text": "No"
        }
      ]
    }) }}

    {{ govukButton({
      "text": "Save changes"
    }) }}
    </form>
  </div>
{% endblock %}
